# افزونه‌ی هماهنگی با چابک برای وردپرس

این افزونه برای هماهنگ‌کردن وب‌سایت وردپرس شما با [چابک](https://chabok.io/) طراحی شده است. با این افزونه می‌توانید کاربران وب‌سایت خود را به صورت آنی در پنل چابک خودتان مشاهده کنید، برای آن‌ها Push Notification ارسال کنید، رفتار آن‌ها را پیگیری کنید، بر اساس رفتارهای ایشان سگمنت درست کنید و ده‌ها امکانات دیگر که پنل چابک در اختیار شما قرار می‌دهد.

## نصب افزونه
1. ابتدا، [فایل ZIP افزونه را دریافت کنید](https://github.com/).
2. وارد قسمت مدیریت وب‌سایت خود شده و از قسمت «افزونه‌ها»، گزینه‌ی «افزودن» را انتخاب کنید.
3. در بالای صفحه، در کنار عبارت «افزودن افزونه»، گزینه‌ی «بارگذاری افزونه» را انتخاب کنید.
4. در قسمتی که برای شما نمایان می‌شود، روی Choose File کلیک کنید و فایل ZIP را که در مرحله‌ی ۱ دریافت کردید را انتخاب کرده و گزینه‌ی «هم‌اکنون نصب کن» را انتخاب کنید.
5. کمی صبر کنید تا وردپرس عملیاتش را انجام دهد، سپس گزینه‌ی «فعال‌کردن افزونه» را انتخاب کنید.
6. حالا، گزینه‌ی «چابک» در منوی شما اضافه شده است. با کلیک روی آن، وارد محیط مدیریت افزونه‌ی چابک می‌شوید.

## تنظیم‌کردن افزونه
پس از نصب کامل افزونه، گزینه‌ی در سمت راست منوی مدیریت وردپرس تحت‌ عنوان «چابک» اضافه می‌شود که با کلیک روی آن، وارد محیط مدیریت افزونه‌ی چابک می‌شوید.

در صفحه‌ی مدیریت، چهار Tab یا قسمت مشاهده می‌کنید:
* **پارامترها**: مشخصات اتصال به سرورهای چابک و هم‌چنین چگونگی اجرای اسکریپت چابک در این صفحه مشخص می‌شود.
* **اتریبیوشن**: در این قسمت، چگونگی شناسایی کاربران وب‌سایت را می‌توانید تنظیم کنید.
* **ترکینگ**: این قسمت، مشخص می‌کند که چه رفتارهایی باید توسط چابک ردگیری شوند.
* **پیشرفته**: در این قسمت جزئیات فنی و هم‌چنین گزینه‌ی «حذف همه‌ی دستگاه‌ها» در دسترس شما قرار می‌گیرند.

### پارامترها
در این قسمت، چگونگی ارتباط با سرورهای چابک تعیین می‌شود.

* **App ID, Web Key, API Key, VAPID Public Key**: چابک برای ارائه‌ی تمام قابلیت‌های خود نیاز دارد تا شما این چهار فیلد را با مقادیر صحیح پر کنید. App ID، Web Key، API Key و VAPID Public Key در [پنل چابک خودتان](https://chabok.io) در قسمت تنظیمات » پلتفرم‌ها می‌توانید پیدا کنید.
هم‌چنین VAPID Public Key را در قسمت تنظیمات » پلتفرم‌ها » وب » تنظیمات می‌توانید پیدا کنید.

* **وب‌پوش**: با فعال‌کردن این گزینه، می‌توانید به کاربرانی که در وب‌سایت شما حضور دارند، Push Notification ارسال کنید. با فعال‌کردن این گزینه، کاربرانی که به تازگی وارد وب‌سایت شما می‌شوند، پیامی از سمت مرورگر خود دریافت می‌کنند که از آن‌ها اجازه می‌گیرد که وب‌سایت شما می‌تواند پوش ارسال کند یا خیر.

* **محیط اجرا**: اگر هنوز وارد محیط عملیاتی نشده‌اید (یکی از پلن‌های چابک را خریداری نکرده‌اید)، گزینه‌ی آزمایشی را فعال کنید.

* **آمار در لحظه**: اگر این گزینه فعال باشد، وضعیت آنلاین‌بودن کاربران در پنل چابک شما به صورت آنی نمایش داده می‌شود.

### اتریبیوشن
در تب اتریبیوشن می‌توانید تنظیمات چگونگی شناسایی کاربران توسط چابک را مشخص کنید.

* **ثبت کاربران واردشده**: در صورتی که این گزینه فعال باشد، کاربرانی که به وردپرس لاگین کرده‌اند، «کلید شناسایی» آن‌ها به چابک ارسال می‌شود تا بر مبنای آن شناسایی شوند.
* **کلید شناسایی کاربر**: این گزینه تعیین می‌کند که کدام‌یک از مشخصات کاربر به عنوان کلید او به چابک ارسال شود.

### ترکینگ
در این تب می‌توانید مشخص کنید که کدام رفتارهای کاربر توسط چابک ردگیری و ثبت شوند. هر کدام از این گزینه‌ها، یک Event یا رویداد خاص را در چابک ثبت می‌کند.

* **ثبت مشاهده‌ی نوشته**: هنگامی که کاربر صفحه‌ی یک پست را باز می‌کند، یک رویداد با نام `view_post` به چابک ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "post_ID": "آی‌دی پست مشاهده‌شده",
  "post_type": "نوع پست مشاهده‌شده، مثلاً post یا page",
  "custom_attribute": "دیتای سفارشی تنظیم‌شده در پست"
}
```

* **ثبت جستجوها**: وقتی که یک کاربر در وب‌سایت با ابزار پیشفرض وردپرس جستجو می‌کند، یک رویداد با نام `search` به چابک ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "query": "کوئری جستجوشده"
}
```

* **ثبت دیدگاه‌ها**: هنگامی که کاربر دیدگاهی را ثبت می‌کند، یک رویداد با نام `comment` ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "author": "نام نویسنده‌ی دیدگاه",
  "comment_post_id": "آی‌دی پستی که دیدگاه روی آن ارسال شده"
}
```

### پیشرفته
در این تب می‌توانید تنظیمات فنی چابک را مشاهده کنید.

* **بازنویسی ServiceWorker**: تنها در صورتی این گزینه را غیرفعال کنید که می‌خواهید از وب‌سرور برای بازنویسی (Rewrite) فایل ChabokServiceWorker.js در ریشه‌ی وب‌سایت‌تان استفاده کنید. در قسمت [تنظیمات بازنویسی](rewrite.md) می‌توانید بیشتر در این مورد بدانید.

* **فراموش‌کردن دستگاه‌ها و کاربرهای ثبت‌شده**: افزونه، آی‌دی دستگاه‌های هر کاربر را (که از وب‌سرویس چابک دریافت می‌کند) در پایگاه‌داده‌ی وردپرس ذخیره می‌کند. با این گزینه می‌توانید تمام این آی‌دی‌ها را از پایگاه‌داده حذف کنید. این گزینه برای تست‌کردن یا دیباگ‌کردن اسکریپت چابک کاربردی است. اگر در حالت عملیاتی هستید، استفاده از این گزینه ممکن است بین داده‌های شما و چابک ناهماهنگی ایجاد کند.

### دستگاه‌های کاربر
دستگاه‌های کاربر را می‌توانید در قسمت ویرایش کاربر در مدیریت وردپرس زیر عنوان «چابک» پیدا کنید. هم‌چنین، می‌توانید با کلیک روی گزینه‌ی «پاک‌کردن دستگاه‌ها»، شناسه‌ی دستگاه‌های ثبت‌شده را از پایگاه‌داده‌ی وردپرس حذف کنید. در این صورت، پس از ورود مجدد کاربر، شناسه‌ی دستگاه او (که توسط چابک تعیین می‌شود) مجدداً در پایگاه‌داده‌ی وردپرس ثبت می‌شود.

## به‌روز‌رسانی افزونه
به‌روز‌رسانی افزونه از طریق وردپرس انجام می‌شود. در صورتی که به‌روز‌رسانی جدیدی برای نسخه‌ی شما دردسترس باشد، در قسمت پیشخوان » به‌روز‌رسانی‌ها در قسمت مدیریت وب‌سایت خودتان می‌توانید آن را مشاهده کنید یا از همان‌جا افزونه‌ی خودتان را به‌روز کنید.

