# افزونه‌ی هماهنگی با چابک برای وردپرس

این افزونه برای هماهنگ‌کردن وب‌سایت وردپرس شما با [چابک](https://chabok.io/) طراحی شده است. با این افزونه می‌توانید کاربران وب‌سایت خود را به صورت آنی در پنل چابک خودتان مشاهده کنید، برای آن‌ها Push Notification ارسال کنید، رفتار آن‌ها را پیگیری کنید، بر اساس رفتارهای ایشان سگمنت درست کنید و ده‌ها امکانات دیگر که پنل چابک در اختیار شما قرار می‌دهد.

## نصب افزونه
@todo: احتمالاً نتونیم روی مخزن وردپرس بذاریم و باید به کاربر آموزش بدیم که چطوری با فایل zip کار کنه.

## تنظیم‌کردن افزونه
پس از نصب افزونه، آیکن چابک در قسمت مدیریت وب‌سایت شما اضافه می‌شود. با کلیک روی آن، به صفحه‌ی تنظیمات چابک هدایت می‌شوید. در تنظیمات اولیه، باید مقادیری که در پنل چابک خودتان، قسمت تنظیمات، قسمت پلتفرم‌ها می‌بینید را در صفحه‌ی تنظیمات افزونه وارد کنید. هم‌چنین، برخی تنظیمات دیگر مانند وب‌پوش و آمار در لحظه را نیز به دلخواه خودتان تنظیم کنید.

### اتریبیوشن
در تب اتریبیوشن می‌توانید تنظیمات چگونگی شناسایی کاربران توسط چابک را مشخص کنید.

* **ثبت کاربران واردشده**: در صورتی که این گزینه فعال باشد، کاربرانی که به وردپرس لاگین کرده‌اند، «کلید شناسایی» آن‌ها به چابک ارسال می‌شود تا بر مبنای آن شناسایی شوند.
* **کلید شناسایی کاربر**: این گزینه تعیین می‌کند که کدام‌یک از مشخصات کاربر به عنوان کلید او به چابک ارسال شود.

### ترکینگ
در این تب می‌توانید مشخص کنید که کدام رفتارهای کاربر توسط چابک ردگیری و ثبت شوند. هر کدام از این گزینه‌ها، یک Event یا رویداد خاص را در چابک ثبت می‌کند.

* **ثبت مشاهده‌ی نوشته**: هنگامی که کاربر صفحه‌ی یک پست را باز می‌کند، یک رویداد با نام `view_post` به چابک ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "post_ID": "آی‌دی پست مشاهده‌شده",
  "post_type": "نوع پست مشاهده‌شده، مثلاً post یا page",
  "custom_attribute": "دیتای سفارشی تنظیم‌شده در پست"
}
```

* **ثبت جستجوها**: وقتی که یک کاربر در وب‌سایت با ابزار پیشفرض وردپرس جستجو می‌کند، یک رویداد با نام `search` به چابک ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "query": "کوئری جستجوشده"
}
```

* **ثبت دیدگاه‌ها**: هنگامی که کاربر دیدگاهی را ثبت می‌کند، یک رویداد با نام `comment` ارسال می‌شود که حاوی داده‌ی زیر است:
```json
{
  "author": "نام نویسنده‌ی دیدگاه",
  "comment_post_id": "آی‌دی پستی که دیدگاه روی آن ارسال شده"
}
```

### پیشرفته
در این تب می‌توانید تنظیمات فنی چابک را مشاهده کنید.

* **بازنویسی ServiceWorker**: تنها در صورتی این گزینه را غیرفعال کنید که می‌خواهید از وب‌سرور برای بازنویسی (Rewrite) فایل ChabokServiceWorker.js در ریشه‌ی وب‌سایت‌تان استفاده کنید. در قسمت [تنظیمات بازنویسی](rewrite.md) می‌توانید بیشتر در این مورد بدانید.

* **فراموش‌کردن دستگاه‌ها و کاربرهای ثبت‌شده**: افزونه، آی‌دی دستگاه‌های هر کاربر را (که از وب‌سرویس چابک دریافت می‌کند) در پایگاه‌داده‌ی وردپرس ذخیره می‌کند. با این گزینه می‌توانید تمام این آی‌دی‌ها را از پایگاه‌داده حذف کنید. این گزینه برای تست‌کردن یا دیباگ‌کردن اسکریپت چابک کاربردی است. اگر در حالت عملیاتی هستید، استفاده از این گزینه ممکن است بین داده‌های شما و چابک ناهماهنگی ایجاد کند.

### دستگاه‌های کاربر
دستگاه‌های کاربر را می‌توانید در قسمت ویرایش کاربر در مدیریت وردپرس مشاهده کنید یا آن‌ها را حذف کنید.